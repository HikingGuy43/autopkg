<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
    <key>identifier</key>
    <string>com.github.sysco.pkg.CiscoAnyConnectVPN</string>
    <key>description</key>
    <string>Packages the Cisco AnyConnect VPN client with a specific profile.</string>
    <key>version</key>
    <string>1.0</string>
    <key>minimum_autopkg_version</key>
    <string>2.0</string>
    <key>input</key>
    <dict>
      <key>NAME</key>
      <string>CiscoAnyConnectVPN</string>
      <key>DOWNLOAD_PATH</key>
      <string></string>
      <key>VERSION</key>
      <string>4.10.08029</string>
      <key>PROFILE_NAME</key>
      <string>Employee_1.0.xml</string>
      <key>PROFILE_DIR</key>
      <string>%RECIPE_DIR%/CiscoSecureClientProfiles</string>
    </dict>
    <key>process</key>
    <array>
      <dict>
        <key>processor</key>
        <string>FileFinder</string>
        <key>arguments</key>
        <dict>
          <key>find</key>
          <string>%DOWNLOAD_PATH%</string>
          <key>found_filename</key>
          <string>downloaded_dmg</string>
        </dict>
      </dict>
      <dict>
        <key>processor</key>
        <string>PkgRootCreator</string>
        <key>arguments</key>
        <dict>
          <key>pkgroot</key>
          <string>%RECIPE_CACHE_DIR%/%NAME%/pkgroot</string>
          <key>pkgdirs</key>
          <dict>
            <key>opt/cisco/anyconnect/profile</key>
            <dict/>
          </dict>
        </dict>
      </dict>
      <dict>
        <key>processor</key>
        <string>DmgMounter</string>
        <key>arguments</key>
        <dict>
          <key>dmg_path</key>
          <string>%RECIPE_CACHE_DIR%/%NAME%/downloaded_dmg</string>
        </dict>
      </dict>
      <dict>
        <key>processor</key>
        <string>Copier</string>
        <key>arguments</key>
        <dict>
          <key>source_path</key>
          <string>/Volumes/AnyConnect/AnyConnect.pkg</string>
          <key>destination_path</key>
          <string>%RECIPE_CACHE_DIR%/%NAME%/pkgroot/opt/cisco/anyconnect</string>
        </dict>
      </dict>
      <dict>
        <key>processor</key>
        <string>Copier</string>
        <key>arguments</key>
        <dict>
          <key>source_path</key>
          <string>%PROFILE_DIR%/%PROFILE_NAME%</string>
          <key>destination_path</key>
          <string>%RECIPE_CACHE_DIR%/%NAME%/pkgroot/opt/cisco/anyconnect/profile/%PROFILE_NAME%</string>
        </dict>
      </dict>
      <dict>
        <key>processor</key>
        <string>PkgCreator</string>
        <key>arguments</key>
        <dict>
          <key>pkgname</key>
          <string>%NAME%</string>
          <key>version</key>
          <string>%VERSION%</string>
          <key>pkgroot</key>
          <string>%RECIPE_CACHE_DIR%/%NAME%/pkgroot</string>
          <key>output_path</key>
          <string>%RECIPE_CACHE_DIR%/%NAME%/%NAME%-%VERSION%.pkg</string>
        </dict>
      </dict>
    </array>
  </dict>
</plist>
